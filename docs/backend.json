{
  "entities": {
    "Shipment": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Shipment",
      "type": "object",
      "description": "Represents a shipment record with details such as order ID, customer information, tracking details, and status.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the shipment record. This ID is generated by concatenating the Source Store Order ID and Item Name."
        },
        "sourceStoreOrderId": {
          "type": "string",
          "description": "The order ID from the source store."
        },
        "itemName": {
          "type": "string",
          "description": "The name of the item being shipped."
        },
        "customerName": {
          "type": "string",
          "description": "The name of the customer who placed the order."
        },
        "orderDate": {
          "type": "string",
          "description": "The date when the order was placed.",
          "format": "date-time"
        },
        "courier": {
          "type": "string",
          "description": "The name of the courier company handling the shipment."
        },
        "trackingNo": {
          "type": "string",
          "description": "The tracking number assigned to the shipment."
        },
        "trackingLink": {
          "type": "string",
          "description": "A URL to track the shipment's progress on the courier's website.",
          "format": "uri"
        },
        "status": {
          "type": "string",
          "description": "The current status of the shipment (e.g., 'Delivered', 'In Transit', 'Pending')."
        }
      },
      "required": [
        "id",
        "sourceStoreOrderId",
        "itemName",
        "customerName",
        "orderDate",
        "courier",
        "trackingNo",
        "trackingLink",
        "status"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "artifacts/{appId}/public/data/shipments/{shipmentId}",
        "definition": {
          "entityName": "Shipment",
          "schema": {
            "$ref": "#/backend/entities/Shipment"
          },
          "description": "Stores all shipment records. The 'appId' parameter allows for namespacing data for different application instances. The 'shipmentId' is a concatenation of Source Store Order ID and Item Name. All data in this collection is publicly accessible.",
          "params": [
            {
              "name": "appId",
              "description": "The application ID, used to segregate data from different application instances."
            },
            {
              "name": "shipmentId",
              "description": "The unique ID of the shipment, derived from the Source Store Order ID and Item Name. This field serves as the document ID."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore structure is designed to support the ShipmentLook application. The primary entity, `Shipment`, is stored in a publicly accessible collection within an `artifacts` document. The structure emphasizes ease of access for anonymous users and real-time updates. The key to authorization independence is that all data is considered public; there are no user-specific private data collections, thus eliminating the need for complex authorization rules based on user identity or ownership. Since all the data in the collection has the same security posture (public read access), this inherently addresses structural segregation. The structure inherently supports QAPs for listing all shipments, as there are no additional rules restricting access based on user roles or ownership. The application ID `__app_id` is incorporated into the path to allow for multiple application instances sharing the same database.\n"
  }
}